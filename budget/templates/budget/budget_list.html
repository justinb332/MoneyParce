<!-- budget_list.html -->

{% extends "base.html" %}

{% block content %}
<h1>Budgets</h1>
<ul>
    {% for item in budget_data %}
        <li>
            <strong>{{ item.budget.name }}</strong> - {{ item.budget.amount }} 
            ({{ item.budget.get_timeframe_display }}) - Category: {{ item.budget.category.name }}
            <a href="{% url 'edit_budget' item.budget.pk %}">Edit</a> |
            <a href="{% url 'delete_budget' item.budget.pk %}" class="text-danger">Delete</a>

            <!-- Show only the relevant total_spent based on the timeframe -->
            {% if item.budget.timeframe == 'daily' %}
                <p>Total Spent Today: ${{ item.total_spent }}</p>
            {% elif item.budget.timeframe == 'weekly' %}
                <p>Total Spent This Week: ${{ item.total_spent }}</p>
            {% elif item.budget.timeframe == 'monthly' %}
                <p>Total Spent This Month: ${{ item.total_spent }}</p>
            {% endif %}
        </li>
    {% endfor %}
</ul>

<a href="{% url 'add_budget' %}">Add a new budget</a>
{% endblock %}
