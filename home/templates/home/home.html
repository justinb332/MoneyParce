{% extends 'base.html' %}
{% load static %}
{% block title %}Home - MoneyParce{% endblock %}

{% block content %}
    <div style="padding: 0 100px;">
        <div style="display: flex; justify-content: space-between; gap: 40px;">
            {# Bar Chart #}
            <div style="text-align: center;">
                <h3>Recent Transactions</h3>
                <div id="bar" style="width: 800px; height: 500px;"></div>
                <button onclick="changeColor('bar')" style="margin-top: 10px;">Change Color</button>
            </div>

            {# Pie Chart #}
            <div style="text-align: center;">
                <h3>Today's Transactions</h3>
                {% if latest_transaction_date != today_date %}
                    <p>No transactions today</p>
                {% else %}
                    <div id="pie" style="width: 800px; height: 500px;"></div>
                    <button onclick="changeColor('pie')" style="margin-top: 10px;">Change Color</button>
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        const colors = ['color1', 'color2', 'color3', 'color4'];
        const currentColorIndex = {
            bar: 0,
            pie: 0
        };

        function renderCharts() {
            chart({{ expenses|safe }}, 'Bar Chart Title', 'Subtitle', 'bar', colors[currentColorIndex.bar]);
            chart({{ expenses|safe }}, 'Pie Chart Title', 'Subtitle', 'pie', colors[currentColorIndex.pie]);
        }

        function changeColor(type) {
            currentColorIndex[type] = (currentColorIndex[type] + 1) % colors.length;
            chart({{ expenses|safe }},
                type === 'bar' ? 'Bar Chart Title' : 'Pie Chart Title',
                'Subtitle',
                type,
                colors[currentColorIndex[type]]
            );
        }

        // Initial render
        renderCharts();
    </script>
{% endblock %}